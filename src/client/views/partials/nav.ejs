<% var currentUser = typeof user !== 'undefined' ? user : null; %>
<nav class="navbar navbar-expand-sm bg-body-tertiary">
    <div class="container-fluid">
        <a class="navbar-brand nav-text" href="/">Home</a>

        <!-- Toggler Button -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Collapsible Navbar Content -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link<%= typeof current !== 'undefined' && current === 'play' ? ' active disabled' : ''; %>"
                       aria-current="page" href="/play">Play</a>
                </li>
            </ul>

            <ul class="navbar-nav ms-auto d-flex align-items-center">
                <div class="nav-text d-flex align-items-center">
                    <% if (currentUser) { %>
                        <h1>Welcome, <%= currentUser.username %></h1>
                    <% } else { %>
                        <h1>Welcome, Guest</h1>
                    <% } %>
                </div>

                <li class="nav-item">
                    <a class="nav-link logout-link" href="/account">
                        <div class="navbar-icon">
                            <%- profileImg %>
                        </div>
                    </a>
                </li>
            </ul>
        </div>

        <div id="toast" class="toast">This is a toast message.</div>
    </div>
</nav>

<style>
    .navbar {
        font-family: Arial, sans-serif;
        font-size: 16px;
        color: #333;
    }

    @keyframes slideInDown {
        0% {
            top: -100px;
        }
        100% {
            top: 0;
        }
    }

    @keyframes slideOutUp {
        100% {
            top: -100px;
        }
    }

    .navbar-icon svg {
        width: 35px;
        height: 35px;
    }

    .toast {
        visibility: hidden;
        min-width: 100%;
        margin-left: 0;
        color: #fff;
        text-align: center;
        border-radius: 2px;
        padding: 10px;
        position: fixed;
        z-index: 1;
        left: 0;
        font-size: 20px;
        background-color: #333;
        opacity: 0;
        transition: opacity 0.5s, visibility 0.5s;
        top: -100px;
        animation: slideOutUp 0.5s;
        height: 60px;
    }

    .toast.show {
        visibility: visible;
        opacity: 1;
        top: 0;
        animation: slideInDown 0.5s forwards;
    }

    .nav-text {
        text-align: center;
        padding-top: 8px;
        padding-right: 10px;
    }

    h1 {
        font-size: 20px;
    }
</style>